<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gioca a Leopardy</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Scoreboard -->
    <div id="scoreboard" class="hidden">
        <div class="player-box">
            <p>Giocatore 1</p>
            <div class="score">0</div>
            <button class="btn-success">+10</button>
            <button class="btn-danger">-10</button>
        </div>
        <div class="player-box">
            <p>Giocatore 2</p>
            <div class="score">0</div>
            <button class="btn-success">+10</button>
            <button class="btn-danger">-10</button>
        </div>
    </div>

    <!-- Tabellone -->
    <div id="board"></div>

    <!-- Modale per la domanda -->
    <div id="questionBox">
        <h4>Domanda</h4>
        <p>Qui apparirà la domanda</p>
        <button id="showAnswerBtn">Mostra la risposta</button>
        <p id="answer" class="hidden">Questa è la risposta!</p>
    </div>

    <!-- Musica -->
    <button id="music-controls" onclick="toggleMusic()">Controlla Musica</button>
    <iframe id="music-frame" src="https://www.youtube.com/embed/YOUR_VIDEO_URL" frameborder="0"></iframe>

    <script>
        // Carica il file JSON per il tabellone
        fetch('board.json')
            .then(response => response.json())
            .then(data => {
                const boardContainer = document.getElementById('board');
                const categories = data.categories;
                const questions = data.questions;

                // Crea la tabella del tabellone
                const table = document.createElement('table');
                table.classList.add('board-table');

                // Crea l'intestazione della tabella
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                categories.forEach(category => {
                    const th = document.createElement('th');
                    th.textContent = category;
                    headerRow.appendChild(th);
                });
                thead.appendChild(headerRow);
                table.appendChild(thead);

                // Crea il corpo della tabella
                const tbody = document.createElement('tbody');
                for (let i = 0; i < questions.length / categories.length; i++) {
                    const row = document.createElement('tr');
                    categories.forEach((category, index) => {
                        const question = questions.filter(q => q.category === category)[i];
                        const td = document.createElement('td');
                        const button = document.createElement('button');
                        button.classList.add('question');
                        button.textContent = question ? question.value : 'N/A';
                        button.dataset.category = category;
                        button.dataset.value = question ? question.value : 'N/A';
                        button.dataset.question = question ? question.question : '';
                        button.dataset.answer = question ? question.answer : '';
                        td.appendChild(button);
                        row.appendChild(td);
                    });
                    tbody.appendChild(row);
                }
                table.appendChild(tbody);
                boardContainer.appendChild(table);
            })
            .catch(error => console.error('Errore nel caricare il file JSON:', error));

        // Funzione per mostrare la domanda e la risposta
        const questionButtons = document.querySelectorAll('.question');
        const questionBox = document.getElementById('questionBox');
        const showAnswerBtn = document.getElementById('showAnswerBtn');
        const answer = document.getElementById('answer');

        questionButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Mostra la finestra della domanda
                questionBox.style.display = 'block';
                questionBox.querySelector('h4').textContent = `${button.dataset.category} - ${button.dataset.value}`;
                questionBox.querySelector('p').textContent = button.dataset.question;

                // Rivelare la risposta al clic
                showAnswerBtn.addEventListener('click', () => {
                    answer.textContent = button.dataset.answer;
                    answer.classList.remove('hidden');
                });
            });
        });

        // Funzione per gestire la musica
        function toggleMusic() {
            const musicFrame = document.getElementById('music-frame');
            if (musicFrame.style.display === 'none') {
                musicFrame.style.display = 'block';
            } else {
                musicFrame.style.display = 'none';
            }
        }
    </script>

</body>
</html>
