$(document).ready((function(){AOS.init()})),document.addEventListener("scroll",(function(){let e=document.getElementById("jumbocome"),t=window.scrollY,n=Math.max(30-.1*t,10);e.style.top=n+"%"})),$(document).ready((function(){$("#summernote-question").summernote({height:300,placeholder:"Enter a question",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["para",["ul","ol"]],["insert",["link","picture"]],["view",["codeview"]]],styleTags:["p","h1","h3","h5"]}),$("#summernote-answer").summernote({height:300,placeholder:"Enter an answer",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["para",["ul","ol"]],["insert",["link","picture"]],["view",["codeview"]]],styleTags:["p","h1","h3","h5"]})})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("div-container-create-table"),t=document.getElementById("add-row-btn"),n=document.getElementById("add-col-btn"),o=document.getElementById("save-table-btn"),d=(document.getElementById("modal-update-question"),document.getElementById("modal-title")),s=$("#summernote-question"),a=$("#summernote-answer");let l=new Map,c="",r=!1;function i(t){const n=t.currentTarget,o=parseInt(n.getAttribute("data-row-index"),10),r=parseInt(n.getAttribute("data-col-index"),10),i=e.querySelector(".row").getElementsByClassName("col");let u="Category";if(i[r]){const e=i[r].querySelector("input");e&&(u=e.value)}const m=e.querySelector(`.row:nth-child(${o+1})`);let p="100";if(m){const e=m.querySelector(".col:first-child input");e&&(p=e.value)}if(d.textContent=`Setup: ${u} for ${p} points`,c=`${o}-${r}`,l.has(c)){const e=l.get(c);s.summernote("code",e.question),a.summernote("code",e.answer)}else s.summernote("code",""),a.summernote("code","")}function u(e,t,n){const o=document.createElement("a");o.classList.add("btn","btn-warning","btn-question"),o.setAttribute("data-toggle","modal"),o.href="#modal-update-question",o.id="C"+n+"-P"+t,o.textContent="Enter question",o.setAttribute("data-row-index",t),o.setAttribute("data-col-index",n),o.addEventListener("click",i),e.appendChild(o)}$("#modal-update-question").on("hidden.bs.modal",(function(){r||(s.summernote("code",""),a.summernote("code","")),r=!1})),window.save=function(){const e=s.summernote("code").trim(),t=a.summernote("code").trim();if(!e||!t)return void alert("Both question and answer must be filled out.");l.set(c,{question:e,answer:t});const[n,o]=c.split("-"),d=document.querySelector(`[data-row-index="${n}"][data-col-index="${o}"]`);d?d.textContent="Edit Question":console.error("Button not found for cell: "+c),r=!0,$("#modal-update-question").modal("hide")},t.addEventListener("click",(function(){const t=e.getElementsByClassName("row");if(t.length-1>=7)return;const n=t[0].getElementsByClassName("col").length,o=t.length,d=document.createElement("div");d.classList.add("row");for(let e=0;e<n;e++){const t=document.createElement("div");if(t.classList.add("col"),0===e){const e=document.createElement("input");e.type="number",e.classList.add("input-point"),e.value="100",e.id="P"+o,e.title="Insert point value for this row of questions",e.required=!0,t.appendChild(e)}else u(t,o,e);d.appendChild(t)}e.appendChild(d)})),n.addEventListener("click",(function(){const t=e.getElementsByClassName("row"),n=t[0].getElementsByClassName("col").length;if(!(n>=7))for(let e=0;e<t.length;e++){const o=document.createElement("div");if(o.classList.add("col"),0===e){const e=document.createElement("input");e.type="text",e.classList.add("input-category"),e.value="Enter category",e.id="C"+n,e.title="Insert a category name for this column of questions",e.required=!0,o.appendChild(e)}else u(o,e,n);t[e].appendChild(o)}})),o.addEventListener("click",(function(){const t=document.getElementById("table-title").value||"Board",n=e.querySelector(".row").getElementsByClassName("col");let o=[];for(let e=1;e<n.length;e++){const t=n[e].querySelector("input");o.push(t?t.value:"")}const d=Array.from(e.getElementsByClassName("row")).slice(1);let s=[];d.forEach((e,t)=>{const n=t+1,o=e.querySelector(".col:first-child input"),d=o?o.value:"100";let a=[];const c=e.querySelectorAll(".col");for(let e=1;e<c.length;e++){const t=`${n}-${e}`,o=l.get(t)||{question:"",answer:""};a.push({question:btoa(o.question),answer:btoa(o.answer)})}s.push({points:"Points "+d,questions:a})});const a={name:t,categories:o,rows:s},c=JSON.stringify(a,null,2),r=new Blob([c],{type:"application/json"}),i=URL.createObjectURL(r),u=document.createElement("a");u.href=i,u.download=t+".json",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(i)}));const m=document.querySelector(".btn-question");m&&m.addEventListener("click",i)})),document.addEventListener("DOMContentLoaded",(function(){let e=null,t=0,n=null;function o(e){const n=document.createElement("div");n.classList.add("player-box","mr-2","mb-2");const o=document.createElement("input");o.type="text",o.value="Player "+e,o.classList.add("player-name","form-control","mb-1"),n.appendChild(o);const d=document.createElement("div");d.classList.add("player-score","mb-1"),d.textContent="0",n.appendChild(d);const s=document.createElement("div");s.classList.add("btn-group");const a=document.createElement("button");a.classList.add("btn","btn-success"),a.textContent="+",a.addEventListener("click",(function(){let e=parseInt(d.textContent,10)||0;d.textContent=e+t}));const l=document.createElement("button");return l.classList.add("btn","btn-danger"),l.textContent="-",l.addEventListener("click",(function(){let e=parseInt(d.textContent,10)||0;d.textContent=e-t})),s.appendChild(a),s.appendChild(l),n.appendChild(s),n}document.getElementById("load-board-btn").addEventListener("click",(function(){const d=document.getElementById("num-players"),s=document.getElementById("json-file"),a=parseInt(d.value,10)||0,l=s.files[0];if(!l||a<=0)return void alert("Please select a valid JSON file and enter a valid number of players.");const c=new FileReader;c.onload=function(d){try{e=JSON.parse(d.target.result),document.getElementById("setup-section").classList.add("d-none"),function(e){document.getElementById("board-title").textContent=e.name||"Board";const o=document.getElementById("board-container"),d=document.createElement("table");d.classList.add("table","table-bordered");const s=document.createElement("thead"),a=document.createElement("tr"),l=document.createElement("th");l.textContent="",a.appendChild(l),e.categories.forEach((function(e){const t=document.createElement("th");t.textContent=e,a.appendChild(t)})),s.appendChild(a),d.appendChild(s);const c=document.createElement("tbody");e.rows.forEach((function(e,o){const d=document.createElement("tr"),s=document.createElement("td");s.textContent=e.points,s.classList.add="th-points",d.appendChild(s),e.questions.forEach((function(o,s){const a=document.createElement("td");a.textContent="try this",a.dataset.question=o.question,a.dataset.answer=o.answer;const l=e.points.match(/\d+/);a.dataset.points=l?l[0]:"0",a.addEventListener("click",(function(){!function(e){n=e;const o=atob(e.dataset.question),d=atob(e.dataset.answer);t=parseInt(e.dataset.points,10)||0,document.getElementById("question-text").innerHTML=o;const s=document.getElementById("answer-text");s.classList.add("d-none"),s.innerHTML=d,document.getElementById("question-overlay").classList.remove("d-none"),e.textContent="show again"}(a)})),d.appendChild(a)})),c.appendChild(d)})),d.appendChild(c),o.innerHTML="",o.appendChild(d)}(e),function(e){const t=document.getElementById("scoreboard");t.innerHTML="",e>6&&(alert("Maximum of 6 players allowed."),e=6);for(let n=1;n<=e;n++)t.appendChild(o(n))}(a),document.getElementById("board-section").classList.remove("d-none"),document.getElementById("scoreboard-section").classList.remove("d-none")}catch(e){alert("Error parsing JSON file.")}},c.readAsText(l)})),document.getElementById("show-answer-btn").addEventListener("click",(function(){document.getElementById("answer-text").classList.remove("d-none"),document.getElementById("hr-question").classList.remove("d-none")})),document.getElementById("close-overlay-btn").addEventListener("click",(function(){document.getElementById("question-overlay").classList.add("d-none"),document.getElementById("hr-question").classList.add("d-none")})),document.getElementById("add-player-btn").addEventListener("click",(function(){const e=document.getElementById("scoreboard"),t=e.children.length;if(t>=6)return void alert("Maximum of 6 players allowed.");const n=t+1;e.appendChild(o(n))}))}));